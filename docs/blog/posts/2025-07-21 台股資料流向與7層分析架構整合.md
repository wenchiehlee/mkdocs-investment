---
authors: [wenchiehlee]
date: 2025-07-21
categories:
  - 投資
tags:
  - 投資
  - 股票
  - 資料流向分析
  - 股票資訊分析堆疊架構
title: 台股資料流向與7層分析架構整合
comments: true
draft: false
description: 詳解台灣股市資料事件、資料流向路徑，以及與7-Level Stock Information Stack的整合應用
---

# 📊 台股資料流向與7層分析架構整合

## 概述

延續[股票資訊分析堆疊架構（7-Level Stock Information Stack）](./2025-06-29 7-Level Stock Information Stack.md)，本文聚焦「台股資料事件怎麼一路流到決策」：資料從哪裡來、多久更新一次、會影響哪一層，以及你該在什麼時間點把哪些訊號串起來。

你可以把它想成一張投資用資料管線圖：**原始資料 → 清理標準化 → 指標/訊號 → 驗證 → 部位決策**。當你理解資料走向，就不容易把「滯後的結論」當成「領先的因子」，也比較能分清楚：行情是基本面驅動、預期差驅動，還是籌碼/情緒驅動。

!!! note "本文定位"
    這篇用「台股常見資料源 + 7層堆疊」整理資料流向，目標是建立可重複執行的分析流程；不是提供單一買賣點。

## 資料流向總覽

| 層級 | 資料來源類型 | 更新頻率 | 資料傳遞方向 | 下游應用 |
|-----|-------------|----------|--------------|----------|
| **Level 1** | 🔸結構化財務資料<br>🔸公司公告事件 | 📅每月/每季定期 | ➡️ L2預期調整<br>➡️ L3籌碼反應<br>➡️ L6驗證回測 | 基本面評分<br>估值模型輸入 |
| **Level 2** | 🔸法人研究報告<br>🔸預測共識資料 | 📊事件驅動更新 | ➡️ L3資金流向<br>➡️ L6預期差異 | 市場預期基準<br>修正動能追蹤 |
| **Level 3** | 🔸交易所即時資料<br>🔸集保結算資料 | ⚡每日/即時 | ➡️ L5情緒指標<br>➡️ L7部位調整 | 籌碼強弱判斷<br>進出場時機 |
| **Level 4** | 🔸總經統計資料<br>🔸政策公告 | 📈月度/季度 | ➡️ 全層級風險調整 | 系統性風險評估<br>產業輪動判斷 |
| **Level 5** | 🔸社群爬蟲資料<br>🔸搜尋趨勢 | 🔄即時監控 | ➡️ L3逆向指標<br>➡️ L7風險控管 | 極端情緒識別<br>逆向操作時機 |
| **Level 6** | 🔸回測驗證結果<br>🔸模型輸出 | 🔬批次處理 | ➡️ L7策略優化 | 策略有效性驗證<br>參數調整建議 |
| **Level 7** | 🔸整合決策輸出<br>🔸風險調整建議 | 🎯即時運算 | ➡️ 執行層 | 最終投資決策<br>部位配置指令 |

## Level 1-3：基礎資料流（Foundational Data Flow）

### 台股高頻事件與資料路徑

| 資料事件 | 發生時間 | 資料路徑 | 處理流程 | 傳遞至層級 |
|----------|----------|----------|----------|-------------|
| **月營收公告** | 每月10日前 | MOPS ➡️ 資料庫 ➡️ 營收模型 | 1. YoY/MoM計算<br>2. 產業比較<br>3. 趨勢分析 | L2: 調整預期<br>L3: 追蹤法人反應 |
| **季報/年報** | 依規定期限公告（以公開資訊觀測站/交易所為準） | MOPS ➡️ 財報解析 ➡️ 財務模型 | 1. 財務比率計算<br>2. 品質分數<br>3. 同業比較 | L2: 預測修正<br>L6: 驗證準確度 |
| **法說會** | 財報後14天 | 公司公告 ➡️ 文字分析 ➡️ 情緒模型 | 1. 關鍵字提取<br>2. 語調分析<br>3. 指引解讀 | L2: 更新展望<br>L5: 市場反應 |
| **三大法人買賣** | 每日15:00 | 證交所 ➡️ 即時資料庫 ➡️ 籌碼模型 | 1. 買賣超統計<br>2. 連續性分析<br>3. 資金流向 | L5: 散戶對比<br>L7: 部位調整 |
| **融資融券** | 每日20:00 | 證交所 ➡️ 籌碼資料庫 ➡️ 散戶指標 | 1. 融資使用率<br>2. 券資比計算<br>3. 軋空機會 | L5: 情緒判斷<br>L7: 風險評估 |
| **集保股權** | 每週六 | 集保中心 ➡️ 股權資料庫 ➡️ 集中度模型 | 1. 股東人數變化<br>2. 大戶持股比例<br>3. 籌碼集中度 | L3: 主力動向<br>L6: 籌碼驗證 |

### 對應報告：月營收 / 股利

如果你想把上面的「資料事件 → 路徑 → 下游應用」直接落地成可查閱的清單，本站有把常用報告整理成「總覽（all）」頁面：你可以先用總覽快速篩選，再點進個股做細看。

- [完整營收報告總覽（所有股票）](../../reports/stage2-cleaning-revenue-report-all.md)
- [完整股利報告總覽（所有股票）](../../reports/stage2-cleaning-dividends-report-all.md)

!!! tip "一個簡單但很有用的串法"
    **月營收（L1）**先看「成長/轉折」→ 再比「是否超出市場預期（L2）」→ 最後觀察「法人/籌碼是否跟上（L3）」；三者同向時，訊號品質通常明顯提升。

!!! note "財報時程提醒"
    一般申報期限常見為：Q1 `5/15`、Q2 `8/14`、Q3 `11/14`、年報 `3/31`；細節以主管機關與公司公告為準。

### 資料整合流程圖

```
[原始資料層]
    ├── 財務資料（MOPS、TEJ）
    ├── 交易資料（TWSE、TPEX）
    └── 研究資料（券商、外資）
           ↓
[資料清理與標準化]
    ├── 資料驗證
    ├── 格式統一
    └── 異常處理
           ↓
[特徵工程層]
    ├── 技術指標計算
    ├── 基本面指標
    └── 籌碼面指標
           ↓
[模型運算層]
    ├── Level 1: 估值模型
    ├── Level 2: 預期調整模型
    └── Level 3: 籌碼評分模型
```

### 基礎層資料依賴關係

```
Level 1 (基本面)
    ├── 營收數據 ──影響──> Level 2 EPS預測調整
    ├── 財報品質 ──影響──> Level 3 法人進出決策
    └── ROE趨勢 ──影響──> Level 6 長期報酬預測

Level 2 (預期面)
    ├── EPS修正 ──觸發──> Level 3 籌碼變化
    ├── 目標價調整 ──影響──> Level 5 市場情緒
    └── 評等變化 ──導致──> Level 7 部位調整

Level 3 (籌碼面)
    ├── 法人動向 ──反映──> Level 2 預期變化
    ├── 散戶指標 ──連結──> Level 5 情緒極端
    └── 籌碼集中 ──預示──> Level 6 價格動能
```

## Level 4-5：情境與情緒如何「改寫」同一份基本面

Level 4（總經/資金）與 Level 5（情緒/敘事）很多時候不是「新增一個訊號」，而是改變你該怎麼解讀 L1-L3：同樣的成長，在不同資金成本/風險偏好下，市場願意給的估值帶會不同。

| 情境/情緒資料 | 常見台灣來源 | 更新頻率 | 典型影響 | 你可以怎麼用 |
|---|---|---:|---|---|
| **利率/匯率/景氣指標** | 央行、主計總處、中經院等 | 月/季 | 影響折現率、外資風險偏好、產業順逆風 | 決定是否放大/縮小 L1-L3 訊號權重 |
| **政策/法規/產業敘事** | 政策公告、法規變動、產業新聞 | 事件驅動 | 改變市場願意給的「估值帶」 | 把 L2 的「預期修正」放到正確框架 |
| **市場情緒與過熱** | 新聞、論壇、搜尋趨勢、當沖/槓桿 | 每日/即時 | 造成短期偏離、急漲急跌 | 用於反向風控：訊號再好也要控槓桿/控部位 |

### 情境層資料相互作用

```
Level 4 (總經資金)
    ├── 利率變化 ──決定──> 資金成本
    ├── 匯率走勢 ──影響──> 外資動向
    └── 產業週期 ──驅動──> 類股輪動
           ↓
    [交互影響]
           ↓
Level 5 (市場情緒)
    ├── VIX指數 ──反映──> 恐慌程度
    ├── 當沖比率 ──顯示──> 投機熱度
    └── 社群熱度 ──預示──> 散戶動向
```

## Level 6-7：整合與決策資料流

### 驗證與回饋機制

| 驗證類型 | 資料輸入 | 驗證方法 | 輸出結果 | 回饋路徑 |
|----------|----------|----------|----------|----------|
| **預測準確度** | L1-L2預測vs實際 | MAE、RMSE計算 | 準確率報告 | 調整L1-L2模型參數 |
| **訊號有效性** | L3-L5訊號vs績效 | 回測勝率統計 | 訊號品質分數 | 優化L3-L5權重 |
| **風險控管** | L4總經+L5情緒 | VaR、壓力測試 | 風險指標儀表板 | 更新L7風控閾值 |
| **策略績效** | L7建議vs實際報酬 | Sharpe、Calmar | 績效歸因分析 | 策略參數最佳化 |

### 對應報告：回撤（風控 / 驗證）

回撤（drawdown）不是 Level 1-3 的資料來源，而是用歷史價格去量化「最壞情境會跌多深、多久能修復」：通常用在 Level 6（驗證/風險度量）與 Level 7（部位與風控規則）。

- [市場分析：回撤報告總覽（所有股票）](../../reports/stage2-cleaning-market-analysis-drawdown-report-all.md)（若尚未產生，請先在 `docs/reports/` 建立對應報告）

### 決策整合流程

```
[多層資料匯集]
Level 1-3 基礎面分數 ──┐
                      ├──→ [特徵向量整合] ──→ [機器學習模型]
Level 4-5 情境面指標 ──┘                           ↓
                                          [決策規則引擎]
Level 6 驗證回饋 ─────────────────────────────┘    ↓
                                          [風險調整模組]
                                                   ↓
                                          [最終決策輸出]
                                                   ↓
                                    ┌─────────────┴─────────────┐
                                    ↓                           ↓
                              [執行指令]                   [監控儀表板]
                              • 買賣訊號                   • 即時績效
                              • 部位大小                   • 風險指標  
                              • 停損停利                   • 異常警示
```

## 一套可以落地的「每週例行」流程（建議從這裡開始）

1. **L1（基本面）**：更新月營收/財報指標，先判斷是「趨勢延續」還是「轉折」。
2. **L2（預期面）**：把 L1 的變化轉成「預期差」：這次公告是驚喜/失望？是否可能引發 EPS/指引修正？
3. **L3（籌碼面）**：看資金是否認同：連續買超/賣超、集中度、散戶槓桿是否同步。
4. **L4-L5（情境/情緒）**：決定要用順風/逆風的權重去看前面三層，並設定風控強度。
5. **L6（驗證）**：定期檢查規則在不同市況下是否失效（例如高利率時估值邏輯改變）。
6. **L7（決策）**：把訊號轉成可執行的部位：買多少、分幾次、風險上限、何時撤退。

!!! warning "最常見的誤用"
    - 只看 L1 的漂亮數字，忽略 L2 已提前反映（「好消息出盡」）。
    - 看到法人買超就追（L3），但忽略 L4-L5 其實在縮風險的市況。
    - 忘了 L6：規則沒驗證，回測只挑順風期。

## 實務應用案例：台積電資料流

### 每月資料流循環

```
[第一週]
外資目標價更新 ──→ L2預期調整 ──→ 共識目標價重算

[10日前]  
月營收公布 ──→ L1營收動能更新 ──→ L2預測模型調整 ──→ L6準確度驗證

[15日前]
董監申報 ──→ L3內部人信心指標 ──→ L7風險評估調整

[每日收盤]
三大法人買賣超 ──→ L3籌碼健康度 ──→ L5散戶比對 ──→ L7部位微調

[季報後]
財報公布 ──→ L1財務品質評分 ──→ L2預期差異分析 ──→ L6模型校正
法說會 ──→ L2展望更新 ──→ L4產業位置確認 ──→ L7策略調整
```

### 資料流時序圖

| 時間軸 | 事件 | Level 1 | Level 2 | Level 3 | Level 4-5 | Level 6-7 |
|--------|------|---------|---------|---------|-----------|-----------|
| T | 營收公布 | 📊更新營收 | - | - | - | - |
| T+1hr | 市場反應 | - | 📈調整預測 | 💰法人買賣 | 📱社群討論 | - |
| T+1day | 券商報告 | - | 🎯目標價更新 | 📊籌碼變化 | - | 🔍驗證預測 |
| T+3day | 資料整合 | - | - | - | - | 🎮策略調整 |

## 資料品質與維護

### 資料品質檢核表

| 檢核項目 | 檢核頻率 | 品質標準 | 異常處理 |
|----------|----------|----------|----------|
| **完整性** | 每日 | 缺值率<5% | 插補或剔除 |
| **時效性** | 即時 | 延遲<30分鐘 | 切換備援源 |
| **一致性** | 每日 | 交叉驗證誤差<1% | 人工審核 |
| **準確性** | 每月 | 與官方資料誤差<0.1% | 資料源校正 |

### 資料治理架構

```
[資料治理委員會]
    ├── 資料品質小組
    │   ├── 日常監控
    │   ├── 異常處理
    │   └── 品質報告
    ├── 資料架構小組
    │   ├── 架構優化
    │   ├── 新源評估
    │   └── 技術升級
    └── 業務應用小組
        ├── 需求收集
        ├── 效果評估
        └── 流程改善
```

## 技術實作要點

### 資料管道設計原則（給想做自動化的人）

1. **即時性優先**：關鍵資料（如三大法人）採用串流處理
2. **容錯機制**：每個資料源都有備援方案
3. **版本控制**：所有資料變更都有追蹤記錄
4. **監控告警**：異常狀況即時通知相關人員

### 系統架構建議

```
[資料收集層]
    ├── 排程爬蟲（Airflow）
    ├── API Gateway
    └── 檔案監控
           ↓
[資料處理層]
    ├── ETL Pipeline（Spark）
    ├── 串流處理（Kafka）
    └── 快取層（Redis）
           ↓
[資料儲存層]
    ├── 時序資料庫（InfluxDB）
    ├── 關聯式資料庫（PostgreSQL）
    └── 文件資料庫（MongoDB）
           ↓
[應用服務層]
    ├── REST API
    ├── GraphQL
    └── WebSocket
```

## 關鍵成功因素

### 資料流設計重點

1. **層級獨立性**：每層可獨立運作，降低耦合度
2. **雙向驗證**：上層預測由下層驗證，下層異常觸發上層調整
3. **時間同步**：確保跨層級資料的時間一致性
4. **權重動態**：根據市場狀況調整各層級權重

### 實施建議

| 階段 | 重點工作 | 預期成果 | 時程建議 |
|------|----------|----------|----------|
| **Phase 1** | 建立L1-L3基礎資料流 | 自動化財務分析 | 3個月 |
| **Phase 2** | 整合L4-L5情境資料 | 市場情緒監控 | 2個月 |
| **Phase 3** | 實作L6-L7決策系統 | 智能投資建議 | 4個月 |
| **Phase 4** | 優化與擴展 | 持續改善 | 持續進行 |

## 總結

透過完整的7層資料流架構設計，我們可以：

1. **系統化處理**：將複雜的投資決策分解為可管理的資料流程
2. **即時反應**：快速捕捉市場變化並做出相應調整
3. **持續優化**：透過回饋機制不斷提升預測準確度
4. **風險控管**：多層級驗證降低單一指標誤判風險

本架構不僅適用於個別投資人，也可擴展為機構等級的投資決策系統。

## 相關文章

- [股票資訊分析堆疊架構（7-Level Stock Information Stack）](./2025-06-29 7-Level Stock Information Stack.md)
- 訊號產生機制詳解（即將發布）
- 模型實作與回測框架（即將發布）
